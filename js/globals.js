// Generated by CoffeeScript 2.5.1
var f, g, pgdn, pgup, undo,
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; },
  indexOf = [].indexOf;

export var global = {
  version: 'ver: B',
  board: null,
  index: 0,
  SIZE: 50, // of square
  filename: "",
  pics: {}, // 12 pjäser
  moves: [],
  data: null,
  superIndex: 0,
  piecess: [], // bort!
  buttons: [],
  database: {},
  currTree: 0, // index till träden
  currNode: null, // pekar in i ett träd
  stack: []
};

import {
  ass,
  log,
  range,
  split,
  param,
  hexToBase64
} from '../js/utils.js';

import {
  Button
} from '../js/button.js';

import _ from 'https://cdn.skypack.dev/lodash';

import cryptoJs from 'https://cdn.skypack.dev/crypto-js';

// gå igenom nodens barn och visa dem i en sorterad lista
export var showChildren = () => {
  var base64, fen, i, key, len, pair, ref, results, value;
  ref = _.keys(global.currNode);
  results = [];
  for (i = 0, len = ref.length; i < len; i++) {
    key = ref[i];
    pair = coords(key);
    global.chess.move(toObjectNotation(pair));
    fen = global.chess.fen();
    base64 = hexToBase64(cryptoJs.SHA256(fen).toString()).slice(0, 8);
    value = global.database[base64];
    console.log(key, base64, value, fen);
    results.push(global.chess.undo());
  }
  return results;
};

export var coords = (uci) => {
  var c0, c1, r0, r1;
  param.String(uci);
  c0 = "abcdefgh".indexOf(uci[0]);
  r0 = "12345678".indexOf(uci[1]);
  c1 = "abcdefgh".indexOf(uci[2]);
  r1 = "12345678".indexOf(uci[3]);
  return param.Array([c0 + 8 * r0, c1 + 8 * r1]);
};

ass([8, 24], coords("a2a4"));

export var toUCI = ([from, to]) => {
  var c0, c1, r0, r1;
  param.Integer(from);
  param.Integer(to);
  c0 = "abcdefgh"[from % 8];
  r0 = "12345678"[Math.floor(from / 8)];
  c1 = "abcdefgh"[to % 8];
  r1 = "12345678"[Math.floor(to / 8)];
  return param.String(c0 + r0 + c1 + r1);
};

ass("e2e4", toUCI([12, 28]));

export var toObjectNotation = ([from, to]) => {
  var uci;
  param.Integer(from);
  param.Integer(to);
  uci = toUCI([from, to]);
  from = uci.slice(0, 2);
  to = uci.slice(2, 4);
  return param.Object({from, to});
};

ass({
  from: 'e2',
  to: 'e4'
}, toObjectNotation([12, 28]));

export var empty = (n) => {
  param.Integer(n);
  return param.String((1 + Math.floor(n / 8)).toString());
};

pgup = () => {
  return loadTree(1);
};

pgdn = () => {
  return loadTree(-1);
};

undo = () => {
  global.chess.undo();
  global.currNode = global.stack.pop();
  return dumpState();
};

export var dumpState = () => {
  console.log('STATE ########');
  console.log('  stack', global.stack);
  console.log('  currNode', global.currNode);
  return console.log('  history', global.chess.history());
};

export var loadTree = (delta) => {
  var keys;
  param.Test(delta === (-1) || delta === 0 || delta === 1);
  global.currTree = modulo(global.currTree + delta, _.size(global.trees));
  keys = _.keys(global.trees);
  global.filename = keys[global.currTree];
  global.tree = global.trees[keys[global.currTree]];
  global.currNode = global.tree.moves[""];
  global.stack = []; //.push global.currNode
  dumpState();
  return showChildren();
};

// console.log 'currNode',global.currNode
// console.log 'stack',global.stack

// global.board.start()

// global.moves = global.tree.plies
// global.piecess = []
// global.moves = _.map global.moves, (move) =>
// 	score = move[1]
// 	san = move[2]
// 	superiorsSan = split move[3]
// 	uci = move[4]
// 	superiors = split move[5]
// 	scores = split move[6]
// 	superiorsSan = superiorsSan.slice 0,12
// 	superiors = superiors.slice 0,12
// 	{score, uci, san, superiors, superiorsSan, scores}
// global.piecess.push global.board.pieces

// for move in global.moves
// 	global.board.pieces = makeMove move.uci, _.last global.piecess
// 	global.piecess.push global.board.pieces

// clickString 'last' # slutställning

// export makeMove = (uci,pieces) =>
// 	param.String uci
// 	param.String pieces

// 	swap = (a,b,c,d) ->
// 		param.Integer a
// 		param.Integer b
// 		param.Integer c
// 		param.Integer d
// 		[pieces[a],pieces[b],pieces[c],pieces[d]] = [pieces[b],pieces[a],pieces[d],pieces[c]]

// 	promote = (uci,from,to) ->
// 		param.String uci
// 		param.Integer from
// 		param.Integer to
// 		newPiece = uci[4]
// 		if to in range 56,63 then newPiece = newPiece.toUpperCase()
// 		pieces[to] = newPiece
// 		pieces[from] = empty from

// 	enPassantTrue = (from,to) -> # Denna funktion skapades av CoPilot. Nästan korrekt.
// 		param.Integer from
// 		param.Integer to
// 		res = false
// 		if pieces[from] in 'pP' and pieces[to] == empty to
// 			if pieces[from] == 'p' and pieces[to+8]=='P' and from - to in [7,9] then res = true # black takes white pawn
// 			if pieces[from] == 'P' and pieces[to-8]=='p' and to - from in [7,9] then res = true # white takes black pawn
// 		param.Boolean res

// 	enPassant = (from,to) ->
// 		param.Integer from
// 		param.Integer to
// 		if pieces[from] == 'p' then pieces[to+8] = empty to+8
// 		if pieces[from] == 'P' then pieces[to-8] = empty to-8
// 		pieces[to] = pieces[from]
// 		pieces[from] = empty to

// 	normalMove = (from,to) ->
// 		param.Integer from
// 		param.Integer to
// 		pieces[to] = pieces[from]
// 		pieces[from] = empty from 
// 		param.Array pieces

// 	pieces = pieces.split ""

// 	[from,to] = coords uci
// 	if uci=='e1g1' then swap 4,6,5,7 # castlings
// 	else if uci=='e1c1' then swap 4,2,0,3
// 	else if uci=='e8g8' then swap 60,62,61,63
// 	else if uci=='e8c8' then swap 56,59,58,60
// 	else if uci.length == 5 then promote uci,from,to
// 	else if enPassantTrue from,to then enPassant from,to
// 	else normalMove from,to
// 	pieces = pieces.join ""
// 	pieces

// ass "RNBQKBNRPPPP2PPP333333334444P4445555555566666666pppppppprnbqkbnr", makeMove 'e2e4', "RNBQKBNRPPPPPPPP33333333444444445555555566666666pppppppprnbqkbnr"
// ass "R1111RK1222222223333333344444444555555556666666677777777r888k88r", makeMove 'e1g1', "R111K11R222222223333333344444444555555556666666677777777r888k88r"
// ass "11KR111R222222223333333344444444555555556666666677777777r888k88r", makeMove 'e1c1', "R111K11R222222223333333344444444555555556666666677777777r888k88r"
// ass "R111K11R222222223333333344444444555555556666666677777777r8888rk8", makeMove 'e8g8', "R111K11R222222223333333344444444555555556666666677777777r888k88r"
// ass "R111K11R22222222333333334444444455555555666666667777777788kr888r", makeMove 'e8c8', "R111K11R222222223333333344444444555555556666666677777777r888k88r"
// ass "R111K11R222222223333333344444444555555556666666677777777Q8888888", makeMove 'a7a8q',"R111K11R2222222233333333444444445555555566666666P777777788888888"
// ass "1111r11122222222333333334444444455555555666666667777777788888888", makeMove 'e2e1r',"111111112222p222333333334444444455555555666666667777777788888888"
// ass "11111111222222223333p3334444444455555555666666667777777788888888", makeMove 'f4e3', "11111111222222223333P33344444p4455555555666666667777777788888888"
// ass 'RNBQKBNR2PPPPPPP33333333P44444445555555566666666pppppppprnbqkbnr', makeMove 'a2a4', "RNBQKBNRPPPPPPPP33333333444444445555555566666666pppppppprnbqkbnr"
g = (item) => {
  // param.Integer item or param.String
  if (indexOf.call(item, "#-") >= 0) {
    return -1000;
  }
  if (indexOf.call(item, "#") >= 0) {
    return 1000;
  }
  return param.Integer(parseInt(item));
};

f = (arrScore, c) => {
  var a, b, d;
  param.Array(arrScore);
  param.String(c);
  arrScore = _.map(arrScore, (item) => {
    return g(item);
  });
  a = _.min(arrScore);
  b = _.max(arrScore);
  c = g(c);
  d = _.max([Math.abs(a), Math.abs(b)]);
  a = -d;
  return param.Number((c - a) / (2 * d));
};

ass(0, f([-100, 50], '-100'));

ass(0.75, f([-100, 50], '50'));

ass(1, f([-100, 50], '100'));

// export setIndex =(value) =>
// 	param.Integer value
// 	if value < -1 or value > global.moves.length then return
// 	if value == -1 then global.board.start()
// 	else
// 		global.index = value
// 		global.buttons = []
// 		global.board.pieces = global.piecess[global.index]
// 		if global.index<=0 then return 
// 		move = global.moves[global.index-1]
// 		global.superIndex = 0
// 		if move.superiors.length == 0
// 			arrSAN = [move.san]
// 			arrScore = [move.score]
// 		else 
// 			arrSAN = move.superiorsSan.concat [move.san]
// 			arrScore = move.scores.concat [move.score]

// 		for i in range min 13, arrSAN.length
// 			do (i) =>
// 				x = 9.4*global.SIZE
// 				y = 0.8*global.SIZE*(i+1.1)
// 				button = new Button x,y, arrSAN[i], () => clickInteger i
// 				button.bg = ['black','white'][global.index%2]
// 				button.fg = ['white','black'][global.index%2]
// 				button.align = LEFT
// 				button.bar = f arrScore, arrScore[i]
// 				global.buttons.push button
// 		global.buttons[0].drawStar = true
export var clickString = (key) => {
  param.String(key);
  if (key === 'flip') {
    return global.board.flip();
  // else if key == 'first' then setIndex 0
  // else if key == 'last' then setIndex global.moves.length
  // else if key == 'prev' then setIndex global.index-1
  // else if key == 'next' then setIndex global.index+1
  } else if (key === 'link') {
    return window.open(data.link, '_blank');
  } else if (key === 'up') {
    return fixSuper(-1);
  } else if (key === 'down') {
    return fixSuper(1);
  } else if (key === 'pgup') {
    return pgup();
  } else if (key === 'pgdn') {
    return pgdn();
  } else if (key === 'undo') {
    return undo();
  } else {
    return console.log('unknown key in clickString', key);
  }
};

export var clickInteger = (ix) => {
  param.Integer(ix);
  //setIndex global.index
  //global.superIndex = key
  return global.board.move(ix); //global.superIndex
};

//fixSuper 0
export var fixSuper = (value) => {
  var uci;
  param.Test(value === (-1) || value === 0 || value === 1);
  global.superIndex = modulo(global.superIndex + value, getMove(global.index - 1).superiors.length + 1);
  if (global.superIndex === 0) {
    uci = getMove(global.index - 1).uci;
  } else {
    uci = getMove(global.index - 1).superiors[global.superIndex - 1];
  }
  return global.board.pieces = makeMove(uci, global.piecess[global.index - 1]);
};

export var getMove = (index) => {
  param.Test((-1 <= index && index <= global.moves.length));
  if (index === -1) {
    return param.Object({
      score: '',
      uci: '',
      san: '',
      superiors: [],
      superiorsSan: []
    });
  } else {
    return param.Object(global.moves[index]);
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xvYmFscy5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxnbG9iYWxzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQTtFQUFBOzs7QUFBQSxPQUFBLElBQU8sTUFBQSxHQUFTO0VBQ2YsT0FBQSxFQUFRLFFBRE87RUFFZixLQUFBLEVBQU0sSUFGUztFQUdmLEtBQUEsRUFBTSxDQUhTO0VBSWYsSUFBQSxFQUFLLEVBSlU7RUFLZixRQUFBLEVBQVMsRUFMTTtFQU1mLElBQUEsRUFBSyxDQUFBLENBTlU7RUFPZixLQUFBLEVBQU0sRUFQUztFQVFmLElBQUEsRUFBSyxJQVJVO0VBU2YsVUFBQSxFQUFXLENBVEk7RUFVZixPQUFBLEVBQVEsRUFWTztFQVdmLE9BQUEsRUFBUSxFQVhPO0VBWWYsUUFBQSxFQUFVLENBQUEsQ0FaSztFQWFmLFFBQUEsRUFBUyxDQWJNO0VBY2YsUUFBQSxFQUFTLElBZE07RUFlZixLQUFBLEVBQU07QUFmUzs7QUFrQmhCLE9BQUE7RUFBUSxHQUFSO0VBQVksR0FBWjtFQUFnQixLQUFoQjtFQUFzQixLQUF0QjtFQUE0QixLQUE1QjtFQUFrQyxXQUFsQztDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLE1BQVI7Q0FBQSxNQUFBOztBQUNBLE9BQU8sQ0FBUCxNQUFBOztBQUNBLE9BQU8sUUFBUCxNQUFBLG9DQXJCQTs7O0FBd0JBLE9BQUEsSUFBTyxZQUFBLEdBQWUsQ0FBQSxDQUFBLEdBQUE7QUFDdEIsTUFBQSxNQUFBLEVBQUEsR0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBO0FBQUM7QUFBQTtFQUFBLEtBQUEscUNBQUE7O0lBQ0MsSUFBQSxHQUFPLE1BQUEsQ0FBTyxHQUFQO0lBQ1AsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFi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LENBQUEsR0FBQTtFQUNoQixLQUFLLENBQUMsSUFBTixDQUFXLENBQUEsQ0FBQyxDQUFELElBQU0sS0FBTixJQUFNLEtBQU4sSUFBZSxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQTVCLENBQVg7RUFDQSxJQUFHLEtBQUEsS0FBTyxDQUFDLENBQVg7V0FDQyxLQUFLLENBQUMsTUFBTixDQUFhO01BQUMsS0FBQSxFQUFNLEVBQVA7TUFBVyxHQUFBLEVBQUksRUFBZjtNQUFtQixHQUFBLEVBQUksRUFBdkI7TUFBMkIsU0FBQSxFQUFVLEVBQXJDO01BQXlDLFlBQUEsRUFBYTtJQUF0RCxDQUFiLEVBREQ7R0FBQSxNQUFBO1dBR0MsS0FBSyxDQUFDLE1BQU4sQ0FBYSxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUQsQ0FBekIsRUFIRDs7QUFGZ0IiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZ2xvYmFsID0ge1xyXG5cdHZlcnNpb246J3ZlcjogQicsXHJcblx0Ym9hcmQ6bnVsbCxcclxuXHRpbmRleDowLFxyXG5cdFNJWkU6NTAsICMgb2Ygc3F1YXJlXHJcblx0ZmlsZW5hbWU6XCJcIixcclxuXHRwaWNzOnt9LCAjIDEyIHBqw6RzZXJcclxuXHRtb3ZlczpbXSxcclxuXHRkYXRhOm51bGwsXHJcblx0c3VwZXJJbmRleDowLFxyXG5cdHBpZWNlc3M6W10sICMgYm9ydCFcclxuXHRidXR0b25zOltdLFxyXG5cdGRhdGFiYXNlOiB7fSxcclxuXHRjdXJyVHJlZTowLCAjIGluZGV4IHRpbGwgdHLDpGRlblxyXG5cdGN1cnJOb2RlOm51bGwsICMgcGVrYXIgaW4gaSBldHQgdHLDpGRcclxuXHRzdGFjazpbXVxyXG59XHJcblxyXG5pbXBvcnQge2Fzcyxsb2cscmFuZ2Usc3BsaXQscGFyYW0saGV4VG9CYXNlNjR9IGZyb20gJy4uL2pzL3V0aWxzLmpzJ1xyXG5pbXBvcnQge0J1dHRvbn0gZnJvbSAnLi4vanMvYnV0dG9uLmpzJ1xyXG5pbXBvcnQgXyAgICAgICAgICAgZnJvbSAnaHR0cHM6Ly9jZG4uc2t5cGFjay5kZXYvbG9kYXNoJ1xyXG5pbXBvcnQgY3J5cHRvSnMgZnJvbSAnaHR0cHM6Ly9jZG4uc2t5cGFjay5kZXYvY3J5cHRvLWpzJ1xyXG5cclxuIyBnw6UgaWdlbm9tIG5vZGVucyBiYXJuIG9jaCB2aXNhIGRlbSBpIGVuIHNvcnRlcmFkIGxpc3RhXHJcbmV4cG9ydCBzaG93Q2hpbGRyZW4gPSA9PlxyXG5cdGZvciBrZXkgaW4gXy5rZXlzIGdsb2JhbC5jdXJyTm9kZVxyXG5cdFx0cGFpciA9IGNvb3JkcyBrZXlcclxuXHRcdGdsb2JhbC5jaGVzcy5tb3ZlIHRvT2JqZWN0Tm90YXRpb24gcGFpclxyXG5cdFx0ZmVuID0gZ2xvYmFsLmNoZXNzLmZlbigpXHJcblx0XHRiYXNlNjQgPSBoZXhUb0Jhc2U2NChjcnlwdG9Kcy5TSEEyNTYoZmVuKS50b1N0cmluZygpKS5zbGljZSAwLDhcclxuXHRcdHZhbHVlID0gZ2xvYmFsLmRhdGFiYXNlW2Jhc2U2NF1cclxuXHRcdGNvbnNvbGUubG9nIGtleSwgYmFzZTY0LCB2YWx1ZSwgZmVuXHJcblx0XHRnbG9iYWwuY2hlc3MudW5kbygpXHJcblxyXG5leHBvcnQgY29vcmRzID0gKHVjaSkgPT5cclxuXHRwYXJhbS5TdHJpbmcgdWNpXHJcblx0YzAgPSBcImFiY2RlZmdoXCIuaW5kZXhPZiB1Y2lbMF1cclxuXHRyMCA9IFwiMTIzNDU2NzhcIi5pbmRleE9mIHVjaVsxXVxyXG5cdGMxID0gXCJhYmNkZWZnaFwiLmluZGV4T2YgdWNpWzJdXHJcblx0cjEgPSBcIjEyMzQ1Njc4XCIuaW5kZXhPZiB1Y2lbM11cclxuXHRwYXJhbS5BcnJheSBbYzArOCpyMCwgYzErOCpyMV1cclxuYXNzIFs4LDI0XSwgY29vcmRzIFwiYTJhNFwiXHJcblxyXG5leHBvcnQgdG9VQ0kgPSAoW2Zyb20sdG9dKSA9PlxyXG5cdHBhcmFtLkludGVnZXIgZnJvbVxyXG5cdHBhcmFtLkludGVnZXIgdG9cclxuXHRjMCA9IFwiYWJjZGVmZ2hcIltmcm9tJThdXHJcblx0cjAgPSBcIjEyMzQ1Njc4XCJbZnJvbS8vOF1cclxuXHRjMSA9IFwiYWJjZGVmZ2hcIlt0byU4XVxyXG5cdHIxID0gXCIxMjM0NTY3OFwiW3RvLy84XVxyXG5cdHBhcmFtLlN0cmluZyBjMCtyMCtjMStyMVxyXG5hc3MgXCJlMmU0XCIsIHRvVUNJIFsxMiwyOF1cclxuXHJcbmV4cG9ydCB0b09iamVjdE5vdGF0aW9uID0gKFtmcm9tLHRvXSkgPT5cclxuXHRwYXJhbS5JbnRlZ2VyIGZyb21cclxuXHRwYXJhbS5JbnRlZ2VyIHRvXHJcblx0dWNpID0gdG9VQ0kgW2Zyb20sdG9dXHJcblx0ZnJvbSA9IHVjaS5zbGljZSAwLDJcclxuXHR0byA9IHVjaS5zbGljZSAyLDRcclxuXHRwYXJhbS5PYmplY3Qge2Zyb20sIHRvfVxyXG5hc3Mge2Zyb206J2UyJywgdG86J2U0J30sIHRvT2JqZWN0Tm90YXRpb24gWzEyLDI4XVxyXG5cclxuZXhwb3J0IGVtcHR5ID0gKG4pID0+XHJcblx0cGFyYW0uSW50ZWdlciBuXHJcblx0cGFyYW0uU3RyaW5nICgxK24vLzgpLnRvU3RyaW5nKClcclxuXHJcbnBndXAgPSA9PiBsb2FkVHJlZSAxXHJcbnBnZG4gPSA9PiBsb2FkVHJlZSAtMVxyXG51bmRvID0gPT4gXHJcblx0Z2xvYmFsLmNoZXNzLnVuZG8oKVxyXG5cdGdsb2JhbC5jdXJyTm9kZSA9IGdsb2JhbC5zdGFjay5wb3AoKVxyXG5cdGR1bXBTdGF0ZSgpXHJcblxyXG5leHBvcnQgZHVtcFN0YXRlID0gPT5cclxuXHRjb25zb2xlLmxvZyAnU1RBVEUgIyMjIyMjIyMnXHJcblx0Y29uc29sZS5sb2cgJyAgc3RhY2snLGdsb2JhbC5zdGFja1xyXG5cdGNvbnNvbGUubG9nICcgIGN1cnJOb2RlJyxnbG9iYWwuY3Vyck5vZGVcclxuXHRjb25zb2xlLmxvZyAnICBoaXN0b3J5JyxnbG9iYWwuY2hlc3MuaGlzdG9yeSgpXHJcblxyXG5cclxuZXhwb3J0IGxvYWRUcmVlID0gKGRlbHRhKSA9PlxyXG5cdHBhcmFtLlRlc3QgZGVsdGEgaW4gWy0xLDAsMV1cclxuXHRnbG9iYWwuY3VyclRyZWUgPSAoZ2xvYmFsLmN1cnJUcmVlK2RlbHRhKSAlJSBfLnNpemUgZ2xvYmFsLnRyZWVzXHJcblxyXG5cdGtleXMgPSBfLmtleXMgZ2xvYmFsLnRyZWVzXHJcblx0Z2xvYmFsLmZpbGVuYW1lID0ga2V5c1tnbG9iYWwuY3VyclRyZWVdXHJcblx0Z2xvYmFsLnRyZWUgPSBnbG9iYWwudHJlZXNba2V5c1tnbG9iYWwuY3VyclRyZWVdXVxyXG5cclxuXHRnbG9iYWwuY3Vyck5vZGUgPSBnbG9iYWwudHJlZS5tb3Zlc1tcIlwiXVxyXG5cdGdsb2JhbC5zdGFjayA9IFtdICMucHVzaCBnbG9iYWwuY3Vyck5vZGVcclxuXHRkdW1wU3RhdGUoKVxyXG5cdHNob3dDaGlsZHJlbigpXHJcblx0IyBjb25zb2xlLmxvZyAnY3Vyck5vZGUnLGdsb2JhbC5jdXJyTm9kZVxyXG5cdCMgY29uc29sZS5sb2cgJ3N0YWNrJyxnbG9iYWwuc3RhY2tcclxuXHJcblx0IyBnbG9iYWwuYm9hcmQuc3RhcnQoKVxyXG5cclxuXHQjIGdsb2JhbC5tb3ZlcyA9IGdsb2JhbC50cmVlLnBsaWVzXHJcblx0IyBnbG9iYWwucGllY2VzcyA9IFtdXHJcblx0IyBnbG9iYWwubW92ZXMgPSBfLm1hcCBnbG9iYWwubW92ZXMsIChtb3ZlKSA9PlxyXG5cdCMgXHRzY29yZSA9IG1vdmVbMV1cclxuXHQjIFx0c2FuID0gbW92ZVsyXVxyXG5cdCMgXHRzdXBlcmlvcnNTYW4gPSBzcGxpdCBtb3ZlWzNdXHJcblx0IyBcdHVjaSA9IG1vdmVbNF1cclxuXHQjIFx0c3VwZXJpb3JzID0gc3BsaXQgbW92ZVs1XVxyXG5cdCMgXHRzY29yZXMgPSBzcGxpdCBtb3ZlWzZdXHJcblx0IyBcdHN1cGVyaW9yc1NhbiA9IHN1cGVyaW9yc1Nhbi5zbGljZSAwLDEyXHJcblx0IyBcdHN1cGVyaW9ycyA9IHN1cGVyaW9ycy5zbGljZSAwLDEyXHJcblx0IyBcdHtzY29yZSwgdWNpLCBzYW4sIHN1cGVyaW9ycywgc3VwZXJpb3JzU2FuLCBzY29yZXN9XHJcblx0IyBnbG9iYWwucGllY2Vzcy5wdXNoIGdsb2JhbC5ib2FyZC5waWVjZXNcclxuXHJcblx0IyBmb3IgbW92ZSBpbiBnbG9iYWwubW92ZXNcclxuXHQjIFx0Z2xvYmFsLmJvYXJkLnBpZWNlcyA9IG1ha2VNb3ZlIG1vdmUudWNpLCBfLmxhc3QgZ2xvYmFsLnBpZWNlc3NcclxuXHQjIFx0Z2xvYmFsLnBpZWNlc3MucHVzaCBnbG9iYWwuYm9hcmQucGllY2VzXHJcblxyXG5cdCMgY2xpY2tTdHJpbmcgJ2xhc3QnICMgc2x1dHN0w6RsbG5pbmdcclxuXHJcbiMgZXhwb3J0IG1ha2VNb3ZlID0gKHVjaSxwaWVjZXMpID0+XHJcbiMgXHRwYXJhbS5TdHJpbmcgdWNpXHJcbiMgXHRwYXJhbS5TdHJpbmcgcGllY2VzXHJcblxyXG4jIFx0c3dhcCA9IChhLGIsYyxkKSAtPlxyXG4jIFx0XHRwYXJhbS5JbnRlZ2VyIGFcclxuIyBcdFx0cGFyYW0uSW50ZWdlciBiXHJcbiMgXHRcdHBhcmFtLkludGVnZXIgY1xyXG4jIFx0XHRwYXJhbS5JbnRlZ2VyIGRcclxuIyBcdFx0W3BpZWNlc1thXSxwaWVjZXNbYl0scGllY2VzW2NdLHBpZWNlc1tkXV0gPSBbcGllY2VzW2JdLHBpZWNlc1thXSxwaWVjZXNbZF0scGllY2VzW2NdXVxyXG5cclxuIyBcdHByb21vdGUgPSAodWNpLGZyb20sdG8pIC0+XHJcbiMgXHRcdHBhcmFtLlN0cmluZyB1Y2lcclxuIyBcdFx0cGFyYW0uSW50ZWdlciBmcm9tXHJcbiMgXHRcdHBhcmFtLkludGVnZXIgdG9cclxuIyBcdFx0bmV3UGllY2UgPSB1Y2lbNF1cclxuIyBcdFx0aWYgdG8gaW4gcmFuZ2UgNTYsNjMgdGhlbiBuZXdQaWVjZSA9IG5ld1BpZWNlLnRvVXBwZXJDYXNlKClcclxuIyBcdFx0cGllY2VzW3RvXSA9IG5ld1BpZWNlXHJcbiMgXHRcdHBpZWNlc1tmcm9tXSA9IGVtcHR5IGZyb21cclxuXHJcbiMgXHRlblBhc3NhbnRUcnVlID0gKGZyb20sdG8pIC0+ICMgRGVubmEgZnVua3Rpb24gc2thcGFkZXMgYXYgQ29QaWxvdC4gTsOkc3RhbiBrb3JyZWt0LlxyXG4jIFx0XHRwYXJhbS5JbnRlZ2VyIGZyb21cclxuIyBcdFx0cGFyYW0uSW50ZWdlciB0b1xyXG4jIFx0XHRyZXMgPSBmYWxzZVxyXG4jIFx0XHRpZiBwaWVjZXNbZnJvbV0gaW4gJ3BQJyBhbmQgcGllY2VzW3RvXSA9PSBlbXB0eSB0b1xyXG4jIFx0XHRcdGlmIHBpZWNlc1tmcm9tXSA9PSAncCcgYW5kIHBpZWNlc1t0bys4XT09J1AnIGFuZCBmcm9tIC0gdG8gaW4gWzcsOV0gdGhlbiByZXMgPSB0cnVlICMgYmxhY2sgdGFrZXMgd2hpdGUgcGF3blxyXG4jIFx0XHRcdGlmIHBpZWNlc1tmcm9tXSA9PSAnUCcgYW5kIHBpZWNlc1t0by04XT09J3AnIGFuZCB0byAtIGZyb20gaW4gWzcsOV0gdGhlbiByZXMgPSB0cnVlICMgd2hpdGUgdGFrZXMgYmxhY2sgcGF3blxyXG4jIFx0XHRwYXJhbS5Cb29sZWFuIHJlc1xyXG5cclxuIyBcdGVuUGFzc2FudCA9IChmcm9tLHRvKSAtPlxyXG4jIFx0XHRwYXJhbS5JbnRlZ2VyIGZyb21cclxuIyBcdFx0cGFyYW0uSW50ZWdlciB0b1xyXG4jIFx0XHRpZiBwaWVjZXNbZnJvbV0gPT0gJ3AnIHRoZW4gcGllY2VzW3RvKzhdID0gZW1wdHkgdG8rOFxyXG4jIFx0XHRpZiBwaWVjZXNbZnJvbV0gPT0gJ1AnIHRoZW4gcGllY2VzW3RvLThdID0gZW1wdHkgdG8tOFxyXG4jIFx0XHRwaWVjZXNbdG9dID0gcGllY2VzW2Zyb21dXHJcbiMgXHRcdHBpZWNlc1tmcm9tXSA9IGVtcHR5IHRvXHJcblxyXG4jIFx0bm9ybWFsTW92ZSA9IChmcm9tLHRvKSAtPlxyXG4jIFx0XHRwYXJhbS5JbnRlZ2VyIGZyb21cclxuIyBcdFx0cGFyYW0uSW50ZWdlciB0b1xyXG4jIFx0XHRwaWVjZXNbdG9dID0gcGllY2VzW2Zyb21dXHJcbiMgXHRcdHBpZWNlc1tmcm9tXSA9IGVtcHR5IGZyb20gXHJcbiMgXHRcdHBhcmFtLkFycmF5IHBpZWNlc1xyXG5cclxuIyBcdHBpZWNlcyA9IHBpZWNlcy5zcGxpdCBcIlwiXHJcblxyXG4jIFx0W2Zyb20sdG9dID0gY29vcmRzIHVjaVxyXG4jIFx0aWYgdWNpPT0nZTFnMScgdGhlbiBzd2FwIDQsNiw1LDcgIyBjYXN0bGluZ3NcclxuIyBcdGVsc2UgaWYgdWNpPT0nZTFjMScgdGhlbiBzd2FwIDQsMiwwLDNcclxuIyBcdGVsc2UgaWYgdWNpPT0nZThnOCcgdGhlbiBzd2FwIDYwLDYyLDYxLDYzXHJcbiMgXHRlbHNlIGlmIHVjaT09J2U4YzgnIHRoZW4gc3dhcCA1Niw1OSw1OCw2MFxyXG4jIFx0ZWxzZSBpZiB1Y2kubGVuZ3RoID09IDUgdGhlbiBwcm9tb3RlIHVjaSxmcm9tLHRvXHJcbiMgXHRlbHNlIGlmIGVuUGFzc2FudFRydWUgZnJvbSx0byB0aGVuIGVuUGFzc2FudCBmcm9tLHRvXHJcbiMgXHRlbHNlIG5vcm1hbE1vdmUgZnJvbSx0b1xyXG4jIFx0cGllY2VzID0gcGllY2VzLmpvaW4gXCJcIlxyXG4jIFx0cGllY2VzXHJcblxyXG4jIGFzcyBcIlJOQlFLQk5SUFBQUDJQUFAzMzMzMzMzMzQ0NDRQNDQ0NTU1NTU1NTU2NjY2NjY2NnBwcHBwcHBwcm5icWtibnJcIiwgbWFrZU1vdmUgJ2UyZTQnLCBcIlJOQlFLQk5SUFBQUFBQUFAzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2NnBwcHBwcHBwcm5icWtibnJcIlxyXG4jIGFzcyBcIlIxMTExUksxMjIyMjIyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3cjg4OGs4OHJcIiwgbWFrZU1vdmUgJ2UxZzEnLCBcIlIxMTFLMTFSMjIyMjIyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3cjg4OGs4OHJcIlxyXG4jIGFzcyBcIjExS1IxMTFSMjIyMjIyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3cjg4OGs4OHJcIiwgbWFrZU1vdmUgJ2UxYzEnLCBcIlIxMTFLMTFSMjIyMjIyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3cjg4OGs4OHJcIlxyXG4jIGFzcyBcIlIxMTFLMTFSMjIyMjIyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3cjg4ODhyazhcIiwgbWFrZU1vdmUgJ2U4ZzgnLCBcIlIxMTFLMTFSMjIyMjIyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3cjg4OGs4OHJcIlxyXG4jIGFzcyBcIlIxMTFLMTFSMjIyMjIyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3ODhrcjg4OHJcIiwgbWFrZU1vdmUgJ2U4YzgnLCBcIlIxMTFLMTFSMjIyMjIyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3cjg4OGs4OHJcIlxyXG4jIGFzcyBcIlIxMTFLMTFSMjIyMjIyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3UTg4ODg4ODhcIiwgbWFrZU1vdmUgJ2E3YThxJyxcIlIxMTFLMTFSMjIyMjIyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2NlA3Nzc3Nzc3ODg4ODg4ODhcIlxyXG4jIGFzcyBcIjExMTFyMTExMjIyMjIyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3ODg4ODg4ODhcIiwgbWFrZU1vdmUgJ2UyZTFyJyxcIjExMTExMTExMjIyMnAyMjIzMzMzMzMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3ODg4ODg4ODhcIlxyXG4jIGFzcyBcIjExMTExMTExMjIyMjIyMjIzMzMzcDMzMzQ0NDQ0NDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3ODg4ODg4ODhcIiwgbWFrZU1vdmUgJ2Y0ZTMnLCBcIjExMTExMTExMjIyMjIyMjIzMzMzUDMzMzQ0NDQ0cDQ0NTU1NTU1NTU2NjY2NjY2Njc3Nzc3Nzc3ODg4ODg4ODhcIlxyXG4jIGFzcyAnUk5CUUtCTlIyUFBQUFBQUDMzMzMzMzMzUDQ0NDQ0NDQ1NTU1NTU1NTY2NjY2NjY2cHBwcHBwcHBybmJxa2JucicsIG1ha2VNb3ZlICdhMmE0JywgXCJSTkJRS0JOUlBQUFBQUFBQMzMzMzMzMzM0NDQ0NDQ0NDU1NTU1NTU1NjY2NjY2NjZwcHBwcHBwcHJuYnFrYm5yXCJcclxuXHJcbmcgPSAoaXRlbSkgPT5cclxuXHQjIHBhcmFtLkludGVnZXIgaXRlbSBvciBwYXJhbS5TdHJpbmdcclxuXHRpZiBcIiMtXCIgaW4gaXRlbSB0aGVuIHJldHVybiAtMTAwMFxyXG5cdGlmIFwiI1wiIGluIGl0ZW0gdGhlbiByZXR1cm4gMTAwMFxyXG5cdHBhcmFtLkludGVnZXIgcGFyc2VJbnQgaXRlbVxyXG5cclxuZiA9IChhcnJTY29yZSxjKSA9PlxyXG5cdHBhcmFtLkFycmF5IGFyclNjb3JlXHJcblx0cGFyYW0uU3RyaW5nIGNcclxuXHRhcnJTY29yZSA9IF8ubWFwIGFyclNjb3JlLCAoaXRlbSkgPT4gZyBpdGVtXHJcblx0YSA9IF8ubWluIGFyclNjb3JlXHJcblx0YiA9IF8ubWF4IGFyclNjb3JlXHJcblx0YyA9IGcgY1xyXG5cdGQgPSBfLm1heCBbTWF0aC5hYnMoYSksTWF0aC5hYnMoYildXHJcblx0YSA9IC1kXHJcblx0cGFyYW0uTnVtYmVyIChjLWEpLygyKmQpXHJcbmFzcyAwLCBmIFstMTAwLDUwXSwnLTEwMCdcclxuYXNzIDAuNzUsIGYgWy0xMDAsNTBdLCc1MCdcclxuYXNzIDEsIGYgWy0xMDAsNTBdLCcxMDAnXHJcblxyXG4jIGV4cG9ydCBzZXRJbmRleCA9KHZhbHVlKSA9PlxyXG4jIFx0cGFyYW0uSW50ZWdlciB2YWx1ZVxyXG4jIFx0aWYgdmFsdWUgPCAtMSBvciB2YWx1ZSA+IGdsb2JhbC5tb3Zlcy5sZW5ndGggdGhlbiByZXR1cm5cclxuIyBcdGlmIHZhbHVlID09IC0xIHRoZW4gZ2xvYmFsLmJvYXJkLnN0YXJ0KClcclxuIyBcdGVsc2VcclxuIyBcdFx0Z2xvYmFsLmluZGV4ID0gdmFsdWVcclxuIyBcdFx0Z2xvYmFsLmJ1dHRvbnMgPSBbXVxyXG4jIFx0XHRnbG9iYWwuYm9hcmQucGllY2VzID0gZ2xvYmFsLnBpZWNlc3NbZ2xvYmFsLmluZGV4XVxyXG4jIFx0XHRpZiBnbG9iYWwuaW5kZXg8PTAgdGhlbiByZXR1cm4gXHJcbiMgXHRcdG1vdmUgPSBnbG9iYWwubW92ZXNbZ2xvYmFsLmluZGV4LTFdXHJcbiMgXHRcdGdsb2JhbC5zdXBlckluZGV4ID0gMFxyXG4jIFx0XHRpZiBtb3ZlLnN1cGVyaW9ycy5sZW5ndGggPT0gMFxyXG4jIFx0XHRcdGFyclNBTiA9IFttb3ZlLnNhbl1cclxuIyBcdFx0XHRhcnJTY29yZSA9IFttb3ZlLnNjb3JlXVxyXG4jIFx0XHRlbHNlIFxyXG4jIFx0XHRcdGFyclNBTiA9IG1vdmUuc3VwZXJpb3JzU2FuLmNvbmNhdCBbbW92ZS5zYW5dXHJcbiMgXHRcdFx0YXJyU2NvcmUgPSBtb3ZlLnNjb3Jlcy5jb25jYXQgW21vdmUuc2NvcmVdXHJcblxyXG4jIFx0XHRmb3IgaSBpbiByYW5nZSBtaW4gMTMsIGFyclNBTi5sZW5ndGhcclxuIyBcdFx0XHRkbyAoaSkgPT5cclxuIyBcdFx0XHRcdHggPSA5LjQqZ2xvYmFsLlNJWkVcclxuIyBcdFx0XHRcdHkgPSAwLjgqZ2xvYmFsLlNJWkUqKGkrMS4xKVxyXG4jIFx0XHRcdFx0YnV0dG9uID0gbmV3IEJ1dHRvbiB4LHksIGFyclNBTltpXSwgKCkgPT4gY2xpY2tJbnRlZ2VyIGlcclxuIyBcdFx0XHRcdGJ1dHRvbi5iZyA9IFsnYmxhY2snLCd3aGl0ZSddW2dsb2JhbC5pbmRleCUyXVxyXG4jIFx0XHRcdFx0YnV0dG9uLmZnID0gWyd3aGl0ZScsJ2JsYWNrJ11bZ2xvYmFsLmluZGV4JTJdXHJcbiMgXHRcdFx0XHRidXR0b24uYWxpZ24gPSBMRUZUXHJcbiMgXHRcdFx0XHRidXR0b24uYmFyID0gZiBhcnJTY29yZSwgYXJyU2NvcmVbaV1cclxuIyBcdFx0XHRcdGdsb2JhbC5idXR0b25zLnB1c2ggYnV0dG9uXHJcbiMgXHRcdGdsb2JhbC5idXR0b25zWzBdLmRyYXdTdGFyID0gdHJ1ZVxyXG5cclxuZXhwb3J0IGNsaWNrU3RyaW5nID0gKGtleSkgPT5cclxuXHRwYXJhbS5TdHJpbmcga2V5XHJcblx0aWYga2V5ID09ICdmbGlwJyB0aGVuIGdsb2JhbC5ib2FyZC5mbGlwKClcclxuXHQjIGVsc2UgaWYga2V5ID09ICdmaXJzdCcgdGhlbiBzZXRJbmRleCAwXHJcblx0IyBlbHNlIGlmIGtleSA9PSAnbGFzdCcgdGhlbiBzZXRJbmRleCBnbG9iYWwubW92ZXMubGVuZ3RoXHJcblx0IyBlbHNlIGlmIGtleSA9PSAncHJldicgdGhlbiBzZXRJbmRleCBnbG9iYWwuaW5kZXgtMVxyXG5cdCMgZWxzZSBpZiBrZXkgPT0gJ25leHQnIHRoZW4gc2V0SW5kZXggZ2xvYmFsLmluZGV4KzFcclxuXHRlbHNlIGlmIGtleSA9PSAnbGluaycgdGhlbiB3aW5kb3cub3BlbiBkYXRhLmxpbmssICdfYmxhbmsnXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ3VwJyAgIHRoZW4gZml4U3VwZXIgLTFcclxuXHRlbHNlIGlmIGtleSA9PSAnZG93bicgdGhlbiBmaXhTdXBlciAxXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ3BndXAnIHRoZW4gcGd1cCgpXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ3BnZG4nIHRoZW4gcGdkbigpXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ3VuZG8nIHRoZW4gdW5kbygpXHJcblx0ZWxzZSBjb25zb2xlLmxvZyAndW5rbm93biBrZXkgaW4gY2xpY2tTdHJpbmcnLGtleVxyXG5cclxuZXhwb3J0IGNsaWNrSW50ZWdlciA9IChpeCkgPT5cclxuXHRwYXJhbS5JbnRlZ2VyIGl4XHJcblx0I3NldEluZGV4IGdsb2JhbC5pbmRleFxyXG5cdCNnbG9iYWwuc3VwZXJJbmRleCA9IGtleVxyXG5cdGdsb2JhbC5ib2FyZC5tb3ZlIGl4ICNnbG9iYWwuc3VwZXJJbmRleFxyXG5cdCNmaXhTdXBlciAwXHJcblxyXG5leHBvcnQgZml4U3VwZXIgPSAodmFsdWUpID0+XHJcblx0cGFyYW0uVGVzdCB2YWx1ZSBpbiBbLTEsMCwxXVxyXG5cdGdsb2JhbC5zdXBlckluZGV4ID0gKGdsb2JhbC5zdXBlckluZGV4K3ZhbHVlKSAlJSAoZ2V0TW92ZShnbG9iYWwuaW5kZXgtMSkuc3VwZXJpb3JzLmxlbmd0aCsxKVxyXG5cdGlmIGdsb2JhbC5zdXBlckluZGV4ID09IDAgdGhlbiB1Y2kgPSBnZXRNb3ZlKGdsb2JhbC5pbmRleC0xKS51Y2lcclxuXHRlbHNlIHVjaSA9IGdldE1vdmUoZ2xvYmFsLmluZGV4LTEpLnN1cGVyaW9yc1tnbG9iYWwuc3VwZXJJbmRleC0xXVxyXG5cdGdsb2JhbC5ib2FyZC5waWVjZXMgPSBtYWtlTW92ZSB1Y2ksZ2xvYmFsLnBpZWNlc3NbZ2xvYmFsLmluZGV4LTFdXHJcblxyXG5leHBvcnQgZ2V0TW92ZSA9IChpbmRleCkgPT5cclxuXHRwYXJhbS5UZXN0IC0xIDw9IGluZGV4IDw9IGdsb2JhbC5tb3Zlcy5sZW5ndGhcclxuXHRpZiBpbmRleD09LTFcclxuXHRcdHBhcmFtLk9iamVjdCB7c2NvcmU6JycsIHVjaTonJywgc2FuOicnLCBzdXBlcmlvcnM6W10sIHN1cGVyaW9yc1NhbjpbXX1cclxuXHRlbHNlXHJcblx0XHRwYXJhbS5PYmplY3QgZ2xvYmFsLm1vdmVzW2luZGV4XVxyXG4iXX0=
//# sourceURL=c:\github\2023-019-ChessTree\coffee\globals.coffee