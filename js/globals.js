// Generated by CoffeeScript 2.5.1
var f, g, link, pgdn, pgup, undo,
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; },
  indexOf = [].indexOf;

import {
  ass,
  log,
  range,
  split,
  param,
  hexToBase64
} from '../js/utils.js';

import {
  Button
} from '../js/button.js';

import _ from 'https://cdn.skypack.dev/lodash';

import cryptoJs from 'https://cdn.skypack.dev/crypto-js';

import {
  download
} from '../js/download.js';

export var global = {
  version: 'ver: B',
  name: 'bishop', // rousseau
  board: null,
  index: 0,
  SIZE: 50, // of square
  pics: {}, // 12 pjäser
  moves: [],
  data: null,
  buttons: [],
  database: {},
  currTree: 0, // index till träden
  currNode: null, // pekar in i ett träd
  count: 0, // räknar antal nya drag i trädet
  stack: []
};

export var coords = (uci) => {
  var c0, c1, r0, r1;
  param.String(uci);
  c0 = "abcdefgh".indexOf(uci[0]);
  r0 = "12345678".indexOf(uci[1]);
  c1 = "abcdefgh".indexOf(uci[2]);
  r1 = "12345678".indexOf(uci[3]);
  return param.Array([c0 + 8 * r0, c1 + 8 * r1]);
};

ass([8, 24], coords("a2a4"));

export var toUCI = ([from, to]) => {
  var c0, c1, r0, r1;
  param.Integer(from);
  param.Integer(to);
  c0 = "abcdefgh"[from % 8];
  r0 = "12345678"[Math.floor(from / 8)];
  c1 = "abcdefgh"[to % 8];
  r1 = "12345678"[Math.floor(to / 8)];
  return param.String(c0 + r0 + c1 + r1);
};

ass("e2e4", toUCI([12, 28]));

export var toObjectNotation = ([from, to]) => {
  var uci;
  param.Integer(from);
  param.Integer(to);
  uci = toUCI([from, to]);
  from = uci.slice(0, 2);
  to = uci.slice(2, 4);
  return param.Object({from, to});
};

ass({
  from: 'e2',
  to: 'e4'
}, toObjectNotation([12, 28]));

export var empty = (n) => {
  param.Integer(n);
  return param.String((1 + Math.floor(n / 8)).toString());
};

pgup = () => {
  return loadTree(1);
};

pgdn = () => {
  return loadTree(-1);
};

undo = () => {
  global.chess.undo();
  return global.currNode = global.stack.pop();
};

// dumpState()
export var dumpState = () => {
  console.log('STATE ########');
  console.log('  stack', global.stack);
  console.log('  currNode', global.currNode);
  return console.log('  history', global.chess.history());
};

export var loadTree = (delta) => {
  param.Test(delta === (-1) || delta === 0 || delta === 1);
  global.currTree = modulo(global.currTree + delta, _.size(global.trees));
  // console.log global.currTree

  // keys = _.keys global.trees
  // global.name = keys[global.currTree]
  // global.tree = global.trees[global.name]
  // console.log global.name
  // console.log global.tree
  global.currNode = global.tree; //.moves[""]
  return global.stack = []; //.push global.currNode
};

//dumpState()
g = (item) => {
  // param.Integer item or param.String
  if (indexOf.call(item, "#-") >= 0) {
    return -1000;
  }
  if (indexOf.call(item, "#") >= 0) {
    return 1000;
  }
  return param.Integer(parseInt(item));
};

f = (arrScore, c) => {
  var a, b, d;
  param.Array(arrScore);
  param.String(c);
  arrScore = _.map(arrScore, (item) => {
    return g(item);
  });
  a = _.min(arrScore);
  b = _.max(arrScore);
  c = g(c);
  d = _.max([Math.abs(a), Math.abs(b)]);
  a = -d;
  return param.Number((c - a) / (2 * d));
};

ass(0, f([-100, 50], '-100'));

ass(0.75, f([-100, 50], '50'));

ass(1, f([-100, 50], '100'));

link = () => {
  return 'https://lichess.org/analysis/' + global.chess.fen();
};

export var clickString = (key) => {
  param.String(key);
  if (key === 'flip') {
    return global.board.flip();
  } else if (key === 'link') {
    return window.open(link(), '_blank');
  } else if (key === 'up') {
    return fixSuper(-1);
  } else if (key === 'down') {
    return fixSuper(1);
  } else if (key === 'pgup') {
    return pgup();
  } else if (key === 'pgdn') {
    return pgdn();
  } else if (key === 'undo') {
    return undo();
  } else if (key === 'save') {
    return download(global.tree, global.name + '.json');
  } else {
    return console.log('unknown key in clickString', key);
  }
};

export var getMove = (index) => {
  param.Test((-1 <= index && index <= global.moves.length));
  if (index === -1) {
    return param.Object({
      score: '',
      uci: '',
      san: '',
      superiors: [],
      superiorsSan: []
    });
  } else {
    return param.Object(global.moves[index]);
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xvYmFscy5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxnbG9iYWxzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLElBQUE7RUFBQTs7O0FBQUEsT0FBQTtFQUFRLEdBQVI7RUFBWSxHQUFaO0VBQWdCLEtBQWhCO0VBQXNCLEtBQXRCO0VBQTRCLEtBQTVCO0VBQWtDLFdBQWxDO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVEsTUFBUjtDQUFBLE1BQUE7O0FBQ0EsT0FBTyxDQUFQLE1BQUE7O0FBQ0EsT0FBTyxRQUFQLE1BQUE7O0FBQ0EsT0FBQTtFQUFRLFFBQVI7Q0FBQSxNQUFBOztBQUVBLE9BQUEsSUFBTyxNQUFBLEdBQVM7RUFDZixPQUFBLEVBQVEsUUFETztFQUVmLElBQUEsRUFBTyxRQUZRO0VBR2YsS0FBQSxFQUFNLElBSFM7RUFJZixLQUFBLEVBQU0sQ0FKUztFQUtmLElBQUEsRUFBSyxFQUxVO0VBTWYsSUFBQSxFQUFLLENBQUEsQ0FOVTtFQU9mLEtBQUEsRUFBTSxFQVBTO0VBUWYsSUFBQSxFQUFLLElBUlU7RUFTZixPQUFBLEVBQVEsRUFUTztFQVVmLFFBQUEsRUFBVSxDQUFBLENBVks7RUFXZixRQUFBLEVBQVMsQ0FYTTtFQVlmLFFBQUEsRUFBUyxJQVpNO0VBYWYsS0FBQSxFQUFPLENBYlE7RUFjZixLQUFBLEVBQU07QUFkUzs7QUFpQmhCLE9BQUEsSUFBTyxNQUFBLEdBQVMsQ0FBQyxHQUFELENBQUEsR0FBQTtBQUNoQixNQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBO0VBQUMsS0FBSyxDQUFDLE1BQU4sQ0FBYSxHQUFiO0VBQ0EsRUFBQSxHQUFLLFVBQVUsQ0FBQyxPQUFYLENBQW1CLEdBQUcsQ0FBQyxDQUFELENBQXRCO0VBQ0wsRUFBQSxHQUFLLFVBQVUsQ0FBQyxPQUFYLENB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TyxNQUFWO1dBQXNCLElBQUEsQ0FBQSxFQUF0QjtHQUFBLE1BQ0EsSUFBRyxHQUFBLEtBQU8sTUFBVjtXQUFzQixJQUFBLENBQUEsRUFBdEI7R0FBQSxNQUNBLElBQUcsR0FBQSxLQUFPLE1BQVY7V0FBc0IsSUFBQSxDQUFBLEVBQXRCO0dBQUEsTUFDQSxJQUFHLEdBQUEsS0FBTyxNQUFWO1dBQXNCLFFBQUEsQ0FBUyxNQUFNLENBQUMsSUFBaEIsRUFBc0IsTUFBTSxDQUFDLElBQVAsR0FBYyxPQUFwQyxFQUF0QjtHQUFBLE1BQUE7V0FDQSxPQUFPLENBQUMsR0FBUixDQUFZLDRCQUFaLEVBQXlDLEdBQXpDLEVBREE7O0FBVGU7O0FBWXJCLE9BQUEsSUFBTyxPQUFBLEdBQVUsQ0FBQyxLQUFELENBQUEsR0FBQTtFQUNoQixLQUFLLENBQUMsSUFBTixDQUFXLENBQUEsQ0FBQyxDQUFELElBQU0sS0FBTixJQUFNLEtBQU4sSUFBZSxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQTVCLENBQVg7RUFDQSxJQUFHLEtBQUEsS0FBTyxDQUFDLENBQVg7V0FDQyxLQUFLLENBQUMsTUFBTixDQUFhO01BQUMsS0FBQSxFQUFNLEVBQVA7TUFBVyxHQUFBLEVBQUksRUFBZjtNQUFtQixHQUFBLEVBQUksRUFBdkI7TUFBMkIsU0FBQSxFQUFVLEVBQXJDO01BQXlDLFlBQUEsRUFBYTtJQUF0RCxDQUFiLEVBREQ7R0FBQSxNQUFBO1dBR0MsS0FBSyxDQUFDLE1BQU4sQ0FBYSxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUQsQ0FBekIsRUFIRDs7QUFGZ0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2Fzcyxsb2cscmFuZ2Usc3BsaXQscGFyYW0saGV4VG9CYXNlNjR9IGZyb20gJy4uL2pzL3V0aWxzLmpzJ1xyXG5pbXBvcnQge0J1dHRvbn0gZnJvbSAnLi4vanMvYnV0dG9uLmpzJ1xyXG5pbXBvcnQgXyBmcm9tICdodHRwczovL2Nkbi5za3lwYWNrLmRldi9sb2Rhc2gnXHJcbmltcG9ydCBjcnlwdG9KcyBmcm9tICdodHRwczovL2Nkbi5za3lwYWNrLmRldi9jcnlwdG8tanMnXHJcbmltcG9ydCB7ZG93bmxvYWR9IGZyb20gJy4uL2pzL2Rvd25sb2FkLmpzJ1xyXG5cclxuZXhwb3J0IGdsb2JhbCA9IHtcclxuXHR2ZXJzaW9uOid2ZXI6IEInLFxyXG5cdG5hbWUgOiAnYmlzaG9wJywgIyByb3Vzc2VhdVxyXG5cdGJvYXJkOm51bGwsXHJcblx0aW5kZXg6MCxcclxuXHRTSVpFOjUwLCAjIG9mIHNxdWFyZVxyXG5cdHBpY3M6e30sICMgMTIgcGrDpHNlclxyXG5cdG1vdmVzOltdLFxyXG5cdGRhdGE6bnVsbCxcclxuXHRidXR0b25zOltdLFxyXG5cdGRhdGFiYXNlOiB7fSxcclxuXHRjdXJyVHJlZTowLCAjIGluZGV4IHRpbGwgdHLDpGRlblxyXG5cdGN1cnJOb2RlOm51bGwsICMgcGVrYXIgaW4gaSBldHQgdHLDpGRcclxuXHRjb3VudDogMCwgIyByw6RrbmFyIGFudGFsIG55YSBkcmFnIGkgdHLDpGRldFxyXG5cdHN0YWNrOltdXHJcbn1cclxuXHJcbmV4cG9ydCBjb29yZHMgPSAodWNpKSA9PlxyXG5cdHBhcmFtLlN0cmluZyB1Y2lcclxuXHRjMCA9IFwiYWJjZGVmZ2hcIi5pbmRleE9mIHVjaVswXVxyXG5cdHIwID0gXCIxMjM0NTY3OFwiLmluZGV4T2YgdWNpWzFdXHJcblx0YzEgPSBcImFiY2RlZmdoXCIuaW5kZXhPZiB1Y2lbMl1cclxuXHRyMSA9IFwiMTIzNDU2NzhcIi5pbmRleE9mIHVjaVszXVxyXG5cdHBhcmFtLkFycmF5IFtjMCs4KnIwLCBjMSs4KnIxXVxyXG5hc3MgWzgsMjRdLCBjb29yZHMgXCJhMmE0XCJcclxuXHJcbmV4cG9ydCB0b1VDSSA9IChbZnJvbSx0b10pID0+XHJcblx0cGFyYW0uSW50ZWdlciBmcm9tXHJcblx0cGFyYW0uSW50ZWdlciB0b1xyXG5cdGMwID0gXCJhYmNkZWZnaFwiW2Zyb20lOF1cclxuXHRyMCA9IFwiMTIzNDU2NzhcIltmcm9tLy84XVxyXG5cdGMxID0gXCJhYmNkZWZnaFwiW3RvJThdXHJcblx0cjEgPSBcIjEyMzQ1Njc4XCJbdG8vLzhdXHJcblx0cGFyYW0uU3RyaW5nIGMwK3IwK2MxK3IxXHJcbmFzcyBcImUyZTRcIiwgdG9VQ0kgWzEyLDI4XVxyXG5cclxuZXhwb3J0IHRvT2JqZWN0Tm90YXRpb24gPSAoW2Zyb20sdG9dKSA9PlxyXG5cdHBhcmFtLkludGVnZXIgZnJvbVxyXG5cdHBhcmFtLkludGVnZXIgdG9cclxuXHR1Y2kgPSB0b1VDSSBbZnJvbSx0b11cclxuXHRmcm9tID0gdWNpLnNsaWNlIDAsMlxyXG5cdHRvID0gdWNpLnNsaWNlIDIsNFxyXG5cdHBhcmFtLk9iamVjdCB7ZnJvbSwgdG99XHJcbmFzcyB7ZnJvbTonZTInLCB0bzonZTQnfSwgdG9PYmplY3ROb3RhdGlvbiBbMTIsMjhdXHJcblxyXG5leHBvcnQgZW1wdHkgPSAobikgPT5cclxuXHRwYXJhbS5JbnRlZ2VyIG5cclxuXHRwYXJhbS5TdHJpbmcgKDErbi8vOCkudG9TdHJpbmcoKVxyXG5cclxucGd1cCA9ID0+IGxvYWRUcmVlIDFcclxucGdkbiA9ID0+IGxvYWRUcmVlIC0xXHJcbnVuZG8gPSA9PiBcclxuXHRnbG9iYWwuY2hlc3MudW5kbygpXHJcblx0Z2xvYmFsLmN1cnJOb2RlID0gZ2xvYmFsLnN0YWNrLnBvcCgpXHJcblx0IyBkdW1wU3RhdGUoKVxyXG5cclxuZXhwb3J0IGR1bXBTdGF0ZSA9ID0+XHJcblx0Y29uc29sZS5sb2cgJ1NUQVRFICMjIyMjIyMjJ1xyXG5cdGNvbnNvbGUubG9nICcgIHN0YWNrJyxnbG9iYWwuc3RhY2tcclxuXHRjb25zb2xlLmxvZyAnICBjdXJyTm9kZScsZ2xvYmFsLmN1cnJOb2RlXHJcblx0Y29uc29sZS5sb2cgJyAgaGlzdG9yeScsZ2xvYmFsLmNoZXNzLmhpc3RvcnkoKVxyXG5cclxuZXhwb3J0IGxvYWRUcmVlID0gKGRlbHRhKSA9PlxyXG5cdHBhcmFtLlRlc3QgZGVsdGEgaW4gWy0xLDAsMV1cclxuXHRnbG9iYWwuY3VyclRyZWUgPSAoZ2xvYmFsLmN1cnJUcmVlK2RlbHRhKSAlJSBfLnNpemUgZ2xvYmFsLnRyZWVzXHJcblx0IyBjb25zb2xlLmxvZyBnbG9iYWwuY3VyclRyZWVcclxuXHJcblx0IyBrZXlzID0gXy5rZXlzIGdsb2JhbC50cmVlc1xyXG5cdCMgZ2xvYmFsLm5hbWUgPSBrZXlzW2dsb2JhbC5jdXJyVHJlZV1cclxuXHQjIGdsb2JhbC50cmVlID0gZ2xvYmFsLnRyZWVzW2dsb2JhbC5uYW1lXVxyXG5cdCMgY29uc29sZS5sb2cgZ2xvYmFsLm5hbWVcclxuXHQjIGNvbnNvbGUubG9nIGdsb2JhbC50cmVlXHJcblxyXG5cdGdsb2JhbC5jdXJyTm9kZSA9IGdsb2JhbC50cmVlICMubW92ZXNbXCJcIl1cclxuXHRnbG9iYWwuc3RhY2sgPSBbXSAjLnB1c2ggZ2xvYmFsLmN1cnJOb2RlXHJcblx0I2R1bXBTdGF0ZSgpXHJcblxyXG5nID0gKGl0ZW0pID0+XHJcblx0IyBwYXJhbS5JbnRlZ2VyIGl0ZW0gb3IgcGFyYW0uU3RyaW5nXHJcblx0aWYgXCIjLVwiIGluIGl0ZW0gdGhlbiByZXR1cm4gLTEwMDBcclxuXHRpZiBcIiNcIiBpbiBpdGVtIHRoZW4gcmV0dXJuIDEwMDBcclxuXHRwYXJhbS5JbnRlZ2VyIHBhcnNlSW50IGl0ZW1cclxuXHJcbmYgPSAoYXJyU2NvcmUsYykgPT5cclxuXHRwYXJhbS5BcnJheSBhcnJTY29yZVxyXG5cdHBhcmFtLlN0cmluZyBjXHJcblx0YXJyU2NvcmUgPSBfLm1hcCBhcnJTY29yZSwgKGl0ZW0pID0+IGcgaXRlbVxyXG5cdGEgPSBfLm1pbiBhcnJTY29yZVxyXG5cdGIgPSBfLm1heCBhcnJTY29yZVxyXG5cdGMgPSBnIGNcclxuXHRkID0gXy5tYXggW01hdGguYWJzKGEpLE1hdGguYWJzKGIpXVxyXG5cdGEgPSAtZFxyXG5cdHBhcmFtLk51bWJlciAoYy1hKS8oMipkKVxyXG5hc3MgMCwgZiBbLTEwMCw1MF0sJy0xMDAnXHJcbmFzcyAwLjc1LCBmIFstMTAwLDUwXSwnNTAnXHJcbmFzcyAxLCBmIFstMTAwLDUwXSwnMTAwJ1xyXG5cclxubGluayA9ID0+ICdodHRwczovL2xpY2hlc3Mub3JnL2FuYWx5c2lzLycgKyBnbG9iYWwuY2hlc3MuZmVuKClcclxuXHJcbmV4cG9ydCBjbGlja1N0cmluZyA9IChrZXkpID0+XHJcblx0cGFyYW0uU3RyaW5nIGtleVxyXG5cdGlmIGtleSA9PSAnZmxpcCcgdGhlbiBnbG9iYWwuYm9hcmQuZmxpcCgpXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ2xpbmsnIHRoZW4gd2luZG93Lm9wZW4gbGluaygpLCAnX2JsYW5rJ1xyXG5cdGVsc2UgaWYga2V5ID09ICd1cCcgICB0aGVuIGZpeFN1cGVyIC0xXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ2Rvd24nIHRoZW4gZml4U3VwZXIgMVxyXG5cdGVsc2UgaWYga2V5ID09ICdwZ3VwJyB0aGVuIHBndXAoKVxyXG5cdGVsc2UgaWYga2V5ID09ICdwZ2RuJyB0aGVuIHBnZG4oKVxyXG5cdGVsc2UgaWYga2V5ID09ICd1bmRvJyB0aGVuIHVuZG8oKVxyXG5cdGVsc2UgaWYga2V5ID09ICdzYXZlJyB0aGVuIGRvd25sb2FkIGdsb2JhbC50cmVlLCBnbG9iYWwubmFtZSArICcuanNvbidcclxuXHRlbHNlIGNvbnNvbGUubG9nICd1bmtub3duIGtleSBpbiBjbGlja1N0cmluZycsa2V5XHJcblxyXG5leHBvcnQgZ2V0TW92ZSA9IChpbmRleCkgPT5cclxuXHRwYXJhbS5UZXN0IC0xIDw9IGluZGV4IDw9IGdsb2JhbC5tb3Zlcy5sZW5ndGhcclxuXHRpZiBpbmRleD09LTFcclxuXHRcdHBhcmFtLk9iamVjdCB7c2NvcmU6JycsIHVjaTonJywgc2FuOicnLCBzdXBlcmlvcnM6W10sIHN1cGVyaW9yc1NhbjpbXX1cclxuXHRlbHNlXHJcblx0XHRwYXJhbS5PYmplY3QgZ2xvYmFsLm1vdmVzW2luZGV4XVxyXG4iXX0=
//# sourceURL=c:\github\2023-019-ChessTree\coffee\globals.coffee