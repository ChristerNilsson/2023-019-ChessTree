// Generated by CoffeeScript 2.5.1
var f, g, pgdn, pgup, undo,
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; },
  indexOf = [].indexOf;

import {
  ass,
  log,
  range,
  split,
  param,
  hexToBase64
} from '../js/utils.js';

import {
  Button
} from '../js/button.js';

import _ from 'https://cdn.skypack.dev/lodash';

import cryptoJs from 'https://cdn.skypack.dev/crypto-js';

import {
  download
} from '../js/download.js';

export var global = {
  version: 'ver: B',
  board: null,
  index: 0,
  SIZE: 50, // of square
  pics: {}, // 12 pjäser
  moves: [],
  data: null,
  buttons: [],
  database: {},
  currTree: 0, // index till träden
  currNode: null, // pekar in i ett träd
  count: 0, // räknar antal nya drag i trädet
  stack: []
};

export var coords = (uci) => {
  var c0, c1, r0, r1;
  param.String(uci);
  c0 = "abcdefgh".indexOf(uci[0]);
  r0 = "12345678".indexOf(uci[1]);
  c1 = "abcdefgh".indexOf(uci[2]);
  r1 = "12345678".indexOf(uci[3]);
  return param.Array([c0 + 8 * r0, c1 + 8 * r1]);
};

ass([8, 24], coords("a2a4"));

export var toUCI = ([from, to]) => {
  var c0, c1, r0, r1;
  param.Integer(from);
  param.Integer(to);
  c0 = "abcdefgh"[from % 8];
  r0 = "12345678"[Math.floor(from / 8)];
  c1 = "abcdefgh"[to % 8];
  r1 = "12345678"[Math.floor(to / 8)];
  return param.String(c0 + r0 + c1 + r1);
};

ass("e2e4", toUCI([12, 28]));

export var toObjectNotation = ([from, to]) => {
  var uci;
  param.Integer(from);
  param.Integer(to);
  uci = toUCI([from, to]);
  from = uci.slice(0, 2);
  to = uci.slice(2, 4);
  return param.Object({from, to});
};

ass({
  from: 'e2',
  to: 'e4'
}, toObjectNotation([12, 28]));

export var empty = (n) => {
  param.Integer(n);
  return param.String((1 + Math.floor(n / 8)).toString());
};

pgup = () => {
  return loadTree(1);
};

pgdn = () => {
  return loadTree(-1);
};

undo = () => {
  global.chess.undo();
  return global.currNode = global.stack.pop();
};

// dumpState()
export var dumpState = () => {
  console.log('STATE ########');
  console.log('  stack', global.stack);
  console.log('  currNode', global.currNode);
  return console.log('  history', global.chess.history());
};

export var loadTree = (delta) => {
  var keys;
  param.Test(delta === (-1) || delta === 0 || delta === 1);
  global.currTree = modulo(global.currTree + delta, _.size(global.trees));
  keys = _.keys(global.trees);
  global.tree = global.trees[keys[global.currTree]];
  global.currNode = global.tree.moves[""];
  return global.stack = []; //.push global.currNode
};

//dumpState()
g = (item) => {
  // param.Integer item or param.String
  if (indexOf.call(item, "#-") >= 0) {
    return -1000;
  }
  if (indexOf.call(item, "#") >= 0) {
    return 1000;
  }
  return param.Integer(parseInt(item));
};

f = (arrScore, c) => {
  var a, b, d;
  param.Array(arrScore);
  param.String(c);
  arrScore = _.map(arrScore, (item) => {
    return g(item);
  });
  a = _.min(arrScore);
  b = _.max(arrScore);
  c = g(c);
  d = _.max([Math.abs(a), Math.abs(b)]);
  a = -d;
  return param.Number((c - a) / (2 * d));
};

ass(0, f([-100, 50], '-100'));

ass(0.75, f([-100, 50], '50'));

ass(1, f([-100, 50], '100'));

export var clickString = (key) => {
  param.String(key);
  if (key === 'flip') {
    return global.board.flip();
  } else if (key === 'link') {
    return window.open(data.link, '_blank');
  } else if (key === 'up') {
    return fixSuper(-1);
  } else if (key === 'down') {
    return fixSuper(1);
  } else if (key === 'pgup') {
    return pgup();
  } else if (key === 'pgdn') {
    return pgdn();
  } else if (key === 'undo') {
    return undo();
  } else if (key === 'save') {
    return download(global.tree, global.filename + '.json');
  } else {
    return console.log('unknown key in clickString', key);
  }
};

export var getMove = (index) => {
  param.Test((-1 <= index && index <= global.moves.length));
  if (index === -1) {
    return param.Object({
      score: '',
      uci: '',
      san: '',
      superiors: [],
      superiorsSan: []
    });
  } else {
    return param.Object(global.moves[index]);
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2xvYmFscy5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxnbG9iYWxzLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQTtFQUFBOzs7QUFBQSxPQUFBO0VBQVEsR0FBUjtFQUFZLEdBQVo7RUFBZ0IsS0FBaEI7RUFBc0IsS0FBdEI7RUFBNEIsS0FBNUI7RUFBa0MsV0FBbEM7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUSxNQUFSO0NBQUEsTUFBQTs7QUFDQSxPQUFPLENBQVAsTUFBQTs7QUFDQSxPQUFPLFFBQVAsTUFBQTs7QUFDQSxPQUFBO0VBQVEsUUFBUjtDQUFBLE1BQUE7O0FBRUEsT0FBQSxJQUFPLE1BQUEsR0FBUztFQUNmLE9BQUEsRUFBUSxRQURPO0VBRWYsS0FBQSxFQUFNLElBRlM7RUFHZixLQUFBLEVBQU0sQ0FIUztFQUlmLElBQUEsRUFBSyxFQUpVO0VBS2YsSUFBQSxFQUFLLENBQUEsQ0FMVTtFQU1mLEtBQUEsRUFBTSxFQU5TO0VBT2YsSUFBQSxFQUFLLElBUFU7RUFRZixPQUFBLEVBQVEsRUFSTztFQVNmLFFBQUEsRUFBVSxDQUFBLENBVEs7RUFVZixRQUFBLEVBQVMsQ0FWTTtFQVdmLFFBQUEsRUFBUyxJQVhNO0VBWWYsS0FBQSxFQUFPLENBWlE7RUFhZixLQUFBLEVBQU07QUFiUzs7QUFnQmhCLE9BQUEsSUFBTyxNQUFBLEdBQVMsQ0FBQyxHQUFELENBQUEsR0FBQTtBQUNoQixNQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBO0VBQUMsS0FBSyxDQUFDLE1BQU4sQ0FBYSxHQUFiO0VBQ0EsRUFBQSxHQUFLLFVBQVUsQ0FBQyxPQUFYLENBQW1CLEdBQUcsQ0FBQyxDQUFELENBQXRCO0VBQ0wsRUFBQSxHQUFLLFVBQVUsQ0FBQyxPQUFYLENBQW1CLEdBQUcsQ0FBQyxDQUFELENBQXRCO0VBQ0wsRUFBQSxHQUFLLFVBQVUsQ0FBQyxPQUFYLENBQW1CLEdBQUcsQ0FBQyxDQUFELENBQXRCO0VBQ0wsRUFBQSxHQUFLLFVBQVUsQ0FBQyxPQUFYLENBQW1CLEdBQUcsQ0FBQyxDQUFELENBQXRCO1NBQ0wsS0FBSyxDQUFDLEtBQU4sQ0FBWSxDQUFDLEVBQUEsR0FBRyxDQUFBLEdBQUUsRUFBTixFQUFVLEVBQUEsR0FBRyxDQUFBLEdBQUUsRUFBZixDQUFaO0FBTmU7O0FBT2hCLEdBQUEsQ0FBSSxDQUFDLENBQUQsRUFBRyxFQUFILENBQUosRUFBWSxNQUFBLENBQU8sTUFBUCxDQUFaOztBQUVBLE9BQUEsSUFBTyxLQUFBLEdBQVEsQ0FBQyxDQUFDLElBQUQsRUFBTSxFQUFOLENBQUQsQ0FBQSxHQUFBO0FBQ2YsTUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQTtFQUFDLEtBQUssQ0FBQyxPQUFOLENBQWMsSUFBZDtFQUNBLEtBQUssQ0FBQyxPQUFOLENBQWMsRUFBZDtFQUNBLEVBQUEsR0FBSyxVQUFVLENBQUMsSUFBQSxHQUFLLENBQU47RUFDZixFQUFBLEdBQUssVUFBVSxZQUFDLE9BQU0sRUFBUDtFQUNmLEVBQUEsR0FBSyxVQUFVLENBQUMsRUFBQSxHQUFHLENBQUo7RUFDZixFQUFBLEdBQUssVUFBVSxZQUFDLEtBQUksRUFBTDtTQUNmLEtBQUssQ0FBQyxNQUFOLENBQWEsRUFBQSxHQUFHLEVBQUgsR0FBTSxFQUFOLEdBQVMsRUFBdEI7QUFQYzs7QUFRZixHQUFBLENBQUksTUFBSixFQUFZLEtBQUEsQ0FBTSxDQUFDLEVBQUQsRUFBSSxFQUFKLENBQU4sQ0FBWjs7QUFFQSxPQUFBLElBQU8sZ0JBQUEsR0FBbUIsQ0FBQyxDQUFDLElBQUQsRUFBTSxFQUFOLENBQUQsQ0FBQSxHQUFBO0FBQzFCLE1BQUE7RUFBQyxLQUFLLENBQUMsT0FBTixDQUFjLElBQWQ7RUFDQSxLQUFLLENBQUMsT0FBTixDQUFjLEVBQWQ7RUFDQSxHQUFBLEdBQU0sS0FBQSxDQUFNLENBQUMsSUFBRCxFQUFNLEVBQU4sQ0FBTjtFQUNOLElBQUEsR0FBTyxHQUFHLENBQUMsS0FBSixDQUFVLENBQVYsRUFBWSxDQUFaO0VBQ1AsRUFBQSxHQUFLLEdBQUcsQ0FBQyxLQUFKLENBQVUsQ0FBVixFQUFZLENBQVo7U0FDTCxLQUFLLENBQUMsTUFBTixDQUFhLENBQUMsSUFBRCxFQUFPLEVBQVAsQ0FBYjtBQU55Qjs7QUFPMUIsR0FBQSxDQUFJO0VBQUMsSUFBQSxFQUFLLElBQU47RUFBWSxFQUFBLEVBQUc7QUFBZixDQUFKLEVBQTBCLGdCQUFBLENBQWlCLENBQUMsRUFBRCxFQUFJLEVBQUosQ0FBakIsQ0FBMUI7O0FBRUEsT0FBQSxJQUFPLEtBQUEsR0FBUSxDQUFDLENBQUQsQ0FBQSxHQUFBO0VBQ2QsS0FBSyxDQUFDLE9BQU4sQ0FBYyxDQUFkO1NBQ0EsS0FBSyxDQUFDLE1BQU4sQ0FBYSxDQUFDLENBQUEsY0FBRSxJQUFHLEVBQU4sQ0FBUSxDQUFDLFFBQVQsQ0FBQSxDQUFiO0FBRmM7O0FBSWYsSUFBQSxHQUFPLENBQUEsQ0FBQSxHQUFBO1NBQUcsUUFBQSxDQUFTLENBQVQ7QUFBSDs7QUFDUCxJQUFBLEdBQU8sQ0FBQSxDQUFBLEdBQUE7U0FBRyxRQUFBLENBQVMsQ0FBQyxDQUFWO0FBQUg7O0FBQ1AsSUFBQSxHQUFPLENBQUEsQ0FBQSxHQUFBO0VBQ04sTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFiLENBQUE7U0FDQSxNQUFNLENBQUMsUUFBUCxHQUFrQixNQUFNLENBQUMsS0FBSyxDQUFDLEdBQWIsQ0FBQTtBQUZaLEVBeERQOzs7QUE2REEsT0FBQSxJQUFPLFNBQUEsR0FBWSxDQUFBLENBQUEsR0FBQTtFQUNsQixPQUFPLENBQUMsR0FBUixDQUFZLGdCQUFaO0VBQ0EsT0FBTyxDQUFDLEdBQVIsQ0FBWSxTQUFaLEVBQXNCLE1BQU0sQ0FBQyxLQUE3QjtFQUNBLE9BQU8sQ0FBQyxHQUFSLENBQVksWUFBWixFQUF5QixNQUFNLENBQUMsUUFBaEM7U0FDQSxPQUFPLENBQUMsR0FBUixDQUFZLFdBQVosRUFBd0IsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFiLENBQUEsQ0FBeEI7QUFKa0I7O0FBTW5CLE9BQUEsSUFBTyxRQUFBLEdBQVcsQ0FBQyxLQUFELENBQUEsR0FBQTtBQUNsQixNQUFBO0VBQUMsS0FBSyxDQUFDLElBQU4sQ0FBVyxXQUFVLENBQUMsTUFBWCxVQUFhLEtBQWIsVUFBZSxDQUExQjtFQUNBLE1BQU0sQ0FBQyxRQUFQLFVBQW1CLE1BQU0sQ0FBQyxRQUFQLEdBQWdCLE9BQVUsQ0FBQyxDQUFDLElBQUYsQ0FBTyxNQUFNLENBQUMsS0FBZDtFQUU3QyxJQUFBLEdBQU8sQ0FBQyxDQUFDLElBQUYsQ0FBTyxNQUFNLENBQUMsS0FBZDtFQUNQLE1BQU0sQ0FBQyxJQUFQLEdBQWMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVIsQ0FBTDtFQUUxQixNQUFNLENBQUMsUUFBUCxHQUFrQixNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFEO1NBQ25DLE1BQU0sQ0FBQyxLQUFQLEdBQWUsR0FSRTtBQUFBLEVBbkVsQjs7O0FBOEVBLENBQUEsR0FBSSxDQUFDLElBQUQsQ0FBQSxHQUFBLEVBQUE7O0VBRUgsaUJBQVcsTUFBUixVQUFIO0FBQXFCLFdBQU8sQ0FBQyxLQUE3Qjs7RUFDQSxpQkFBVSxNQUFQLFNBQUg7QUFBb0IsV0FBTyxLQUEzQjs7U0FDQSxLQUFLLENBQUMsT0FBTixDQUFjLFFBQUEsQ0FBUyxJQUFULENBQWQ7QUFKRzs7QUFNSixDQUFBLEdBQUksQ0FBQyxRQUFELEVBQVUsQ0FBVixDQUFBLEdBQUE7QUFDSixNQUFBLENBQUEsRUFBQSxDQUFBLEVBQUE7RUFBQyxLQUFLLENBQUMsS0FBTixDQUFZLFFBQVo7RUFDQSxLQUFLLENBQUMsTUFBTixDQUFhLENBQWI7RUFDQSxRQUFBLEdBQVcsQ0FBQyxDQUFDLEdBQUYsQ0FBTSxRQUFOLEVBQWdCLENBQUMsSUFBRCxDQUFBLEdBQUE7V0FBVSxDQUFBLENBQUUsSUFBRjtFQUFWLENBQWhCO0VBQ1gsQ0FBQSxHQUFJLENBQUMsQ0FBQyxHQUFGLENBQU0sUUFBTjtFQUNKLENBQUEsR0FBSSxDQUFDLENBQUMsR0FBRixDQUFNLFFBQU47RUFDSixDQUFBLEdBQUksQ0FBQSxDQUFFLENBQUY7RUFDSixDQUFBLEdBQUksQ0FBQyxDQUFDLEdBQUYsQ0FBTSxDQUFDLElBQUksQ0FBQyxHQUFMLENBQVMsQ0FBVCxDQUFELEVBQWEsSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFULENBQWIsQ0FBTjtFQUNKLENBQUEsR0FBSSxDQUFDO1NBQ0wsS0FBSyxDQUFDLE1BQU4sQ0FBYSxDQUFDLENBQUEsR0FBRSxDQUFILENBQUEsR0FBTSxDQUFDLENBQUEsR0FBRSxDQUFILENBQW5CO0FBVEc7O0FBVUosR0FBQSxDQUFJLENBQUosRUFBTyxDQUFBLENBQUUsQ0FBQyxDQUFDLEdBQUYsRUFBTSxFQUFOLENBQUYsRUFBWSxNQUFaLENBQVA7O0FBQ0EsR0FBQSxDQUFJLElBQUosRUFBVSxDQUFBLENBQUUsQ0FBQyxDQUFDLEdBQUYsRUFBTSxFQUFOLENBQUYsRUFBWSxJQUFaLENBQVY7O0FBQ0EsR0FBQSxDQUFJLENBQUosRUFBTyxDQUFBLENBQUUsQ0FBQyxDQUFDLEdBQUYsRUFBTSxFQUFOLENBQUYsRUFBWSxLQUFaLENBQVA7O0FBRUEsT0FBQSxJQUFPLFdBQUEsR0FBYyxDQUFDLEdBQUQsQ0FBQSxHQUFBO0VBQ3BCLEtBQUssQ0FBQyxNQUFOLENBQWEsR0FBYjtFQUNBLElBQUcsR0FBQSxLQUFPLE1BQVY7V0FBc0IsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFiLENBQUEsRUFBdEI7R0FBQSxNQUNLLElBQUcsR0FBQSxLQUFPLE1BQVY7V0FBc0IsTUFBTSxDQUFDLElBQVAsQ0FBWSxJQUFJLENBQUMsSUFBakIsRUFBdUIsUUFBdkIsRUFBdEI7R0FBQSxNQUNBLElBQUcsR0FBQSxLQUFPLElBQVY7V0FBc0IsUUFBQSxDQUFTLENBQUMsQ0FBVixFQUF0QjtHQUFBLE1BQ0EsSUFBRyxHQUFBLEtBQU8sTUFBVjtXQUFzQixRQUFBLENBQVMsQ0FBVCxFQUF0QjtHQUFBLE1BQ0EsSUFBRyxHQUFBLEtBQU8sTUFBVjtXQUFzQixJQUFBLENBQUEsRUFBdEI7R0FBQSxNQUNBLElBQUcsR0FBQSxLQUFPLE1BQVY7V0FBc0IsSUFBQSxDQUFBLEVBQXRCO0dBQUEsTUFDQSxJQUFHLEdBQUEsS0FBTyxNQUFWO1dBQXNCLElBQUEsQ0FBQSxFQUF0QjtHQUFBLE1BQ0EsSUFBRyxHQUFBLEtBQU8sTUFBVjtXQUFzQixRQUFBLENBQVMsTUFBTSxDQUFDLElBQWhCLEVBQXNCLE1BQU0sQ0FBQyxRQUFQLEdBQWtCLE9BQXhDLEVBQXRCO0dBQUEsTUFBQTtXQUNBLE9BQU8sQ0FBQyxHQUFSLENBQVksNEJBQVosRUFBeUMsR0FBekMsRUFEQTs7QUFUZTs7QUFZckIsT0FBQSxJQUFPLE9BQUEsR0FBVSxDQUFDLEtBQUQsQ0FBQSxHQUFBO0VBQ2hCLEtBQUssQ0FBQyxJQUFOLENBQVcsQ0FBQSxDQUFDLENBQUQsSUFBTSxLQUFOLElBQU0sS0FBTixJQUFlLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBNUIsQ0FBWDtFQUNBLElBQUcsS0FBQSxLQUFPLENBQUMsQ0FBWDtXQUNDLEtBQUssQ0FBQyxNQUFOLENBQWE7TUFBQyxLQUFBLEVBQU0sRUFBUDtNQUFXLEdBQUEsRUFBSSxFQUFmO01BQW1CLEdBQUEsRUFBSSxFQUF2QjtNQUEyQixTQUFBLEVBQVUsRUFBckM7TUFBeUMsWUFBQSxFQUFhO0lBQXRELENBQWIsRUFERDtHQUFBLE1BQUE7V0FHQyxLQUFLLENBQUMsTUFBTixDQUFhLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBRCxDQUF6QixFQUhEOztBQUZnQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YXNzLGxvZyxyYW5nZSxzcGxpdCxwYXJhbSxoZXhUb0Jhc2U2NH0gZnJvbSAnLi4vanMvdXRpbHMuanMnXHJcbmltcG9ydCB7QnV0dG9ufSBmcm9tICcuLi9qcy9idXR0b24uanMnXHJcbmltcG9ydCBfIGZyb20gJ2h0dHBzOi8vY2RuLnNreXBhY2suZGV2L2xvZGFzaCdcclxuaW1wb3J0IGNyeXB0b0pzIGZyb20gJ2h0dHBzOi8vY2RuLnNreXBhY2suZGV2L2NyeXB0by1qcydcclxuaW1wb3J0IHtkb3dubG9hZH0gZnJvbSAnLi4vanMvZG93bmxvYWQuanMnXHJcblxyXG5leHBvcnQgZ2xvYmFsID0ge1xyXG5cdHZlcnNpb246J3ZlcjogQicsXHJcblx0Ym9hcmQ6bnVsbCxcclxuXHRpbmRleDowLFxyXG5cdFNJWkU6NTAsICMgb2Ygc3F1YXJlXHJcblx0cGljczp7fSwgIyAxMiBwasOkc2VyXHJcblx0bW92ZXM6W10sXHJcblx0ZGF0YTpudWxsLFxyXG5cdGJ1dHRvbnM6W10sXHJcblx0ZGF0YWJhc2U6IHt9LFxyXG5cdGN1cnJUcmVlOjAsICMgaW5kZXggdGlsbCB0csOkZGVuXHJcblx0Y3Vyck5vZGU6bnVsbCwgIyBwZWthciBpbiBpIGV0dCB0csOkZFxyXG5cdGNvdW50OiAwLCAjIHLDpGtuYXIgYW50YWwgbnlhIGRyYWcgaSB0csOkZGV0XHJcblx0c3RhY2s6W11cclxufVxyXG5cclxuZXhwb3J0IGNvb3JkcyA9ICh1Y2kpID0+XHJcblx0cGFyYW0uU3RyaW5nIHVjaVxyXG5cdGMwID0gXCJhYmNkZWZnaFwiLmluZGV4T2YgdWNpWzBdXHJcblx0cjAgPSBcIjEyMzQ1Njc4XCIuaW5kZXhPZiB1Y2lbMV1cclxuXHRjMSA9IFwiYWJjZGVmZ2hcIi5pbmRleE9mIHVjaVsyXVxyXG5cdHIxID0gXCIxMjM0NTY3OFwiLmluZGV4T2YgdWNpWzNdXHJcblx0cGFyYW0uQXJyYXkgW2MwKzgqcjAsIGMxKzgqcjFdXHJcbmFzcyBbOCwyNF0sIGNvb3JkcyBcImEyYTRcIlxyXG5cclxuZXhwb3J0IHRvVUNJID0gKFtmcm9tLHRvXSkgPT5cclxuXHRwYXJhbS5JbnRlZ2VyIGZyb21cclxuXHRwYXJhbS5JbnRlZ2VyIHRvXHJcblx0YzAgPSBcImFiY2RlZmdoXCJbZnJvbSU4XVxyXG5cdHIwID0gXCIxMjM0NTY3OFwiW2Zyb20vLzhdXHJcblx0YzEgPSBcImFiY2RlZmdoXCJbdG8lOF1cclxuXHRyMSA9IFwiMTIzNDU2NzhcIlt0by8vOF1cclxuXHRwYXJhbS5TdHJpbmcgYzArcjArYzErcjFcclxuYXNzIFwiZTJlNFwiLCB0b1VDSSBbMTIsMjhdXHJcblxyXG5leHBvcnQgdG9PYmplY3ROb3RhdGlvbiA9IChbZnJvbSx0b10pID0+XHJcblx0cGFyYW0uSW50ZWdlciBmcm9tXHJcblx0cGFyYW0uSW50ZWdlciB0b1xyXG5cdHVjaSA9IHRvVUNJIFtmcm9tLHRvXVxyXG5cdGZyb20gPSB1Y2kuc2xpY2UgMCwyXHJcblx0dG8gPSB1Y2kuc2xpY2UgMiw0XHJcblx0cGFyYW0uT2JqZWN0IHtmcm9tLCB0b31cclxuYXNzIHtmcm9tOidlMicsIHRvOidlNCd9LCB0b09iamVjdE5vdGF0aW9uIFsxMiwyOF1cclxuXHJcbmV4cG9ydCBlbXB0eSA9IChuKSA9PlxyXG5cdHBhcmFtLkludGVnZXIgblxyXG5cdHBhcmFtLlN0cmluZyAoMStuLy84KS50b1N0cmluZygpXHJcblxyXG5wZ3VwID0gPT4gbG9hZFRyZWUgMVxyXG5wZ2RuID0gPT4gbG9hZFRyZWUgLTFcclxudW5kbyA9ID0+IFxyXG5cdGdsb2JhbC5jaGVzcy51bmRvKClcclxuXHRnbG9iYWwuY3Vyck5vZGUgPSBnbG9iYWwuc3RhY2sucG9wKClcclxuXHQjIGR1bXBTdGF0ZSgpXHJcblxyXG5leHBvcnQgZHVtcFN0YXRlID0gPT5cclxuXHRjb25zb2xlLmxvZyAnU1RBVEUgIyMjIyMjIyMnXHJcblx0Y29uc29sZS5sb2cgJyAgc3RhY2snLGdsb2JhbC5zdGFja1xyXG5cdGNvbnNvbGUubG9nICcgIGN1cnJOb2RlJyxnbG9iYWwuY3Vyck5vZGVcclxuXHRjb25zb2xlLmxvZyAnICBoaXN0b3J5JyxnbG9iYWwuY2hlc3MuaGlzdG9yeSgpXHJcblxyXG5leHBvcnQgbG9hZFRyZWUgPSAoZGVsdGEpID0+XHJcblx0cGFyYW0uVGVzdCBkZWx0YSBpbiBbLTEsMCwxXVxyXG5cdGdsb2JhbC5jdXJyVHJlZSA9IChnbG9iYWwuY3VyclRyZWUrZGVsdGEpICUlIF8uc2l6ZSBnbG9iYWwudHJlZXNcclxuXHJcblx0a2V5cyA9IF8ua2V5cyBnbG9iYWwudHJlZXNcclxuXHRnbG9iYWwudHJlZSA9IGdsb2JhbC50cmVlc1trZXlzW2dsb2JhbC5jdXJyVHJlZV1dXHJcblxyXG5cdGdsb2JhbC5jdXJyTm9kZSA9IGdsb2JhbC50cmVlLm1vdmVzW1wiXCJdXHJcblx0Z2xvYmFsLnN0YWNrID0gW10gIy5wdXNoIGdsb2JhbC5jdXJyTm9kZVxyXG5cdCNkdW1wU3RhdGUoKVxyXG5cclxuZyA9IChpdGVtKSA9PlxyXG5cdCMgcGFyYW0uSW50ZWdlciBpdGVtIG9yIHBhcmFtLlN0cmluZ1xyXG5cdGlmIFwiIy1cIiBpbiBpdGVtIHRoZW4gcmV0dXJuIC0xMDAwXHJcblx0aWYgXCIjXCIgaW4gaXRlbSB0aGVuIHJldHVybiAxMDAwXHJcblx0cGFyYW0uSW50ZWdlciBwYXJzZUludCBpdGVtXHJcblxyXG5mID0gKGFyclNjb3JlLGMpID0+XHJcblx0cGFyYW0uQXJyYXkgYXJyU2NvcmVcclxuXHRwYXJhbS5TdHJpbmcgY1xyXG5cdGFyclNjb3JlID0gXy5tYXAgYXJyU2NvcmUsIChpdGVtKSA9PiBnIGl0ZW1cclxuXHRhID0gXy5taW4gYXJyU2NvcmVcclxuXHRiID0gXy5tYXggYXJyU2NvcmVcclxuXHRjID0gZyBjXHJcblx0ZCA9IF8ubWF4IFtNYXRoLmFicyhhKSxNYXRoLmFicyhiKV1cclxuXHRhID0gLWRcclxuXHRwYXJhbS5OdW1iZXIgKGMtYSkvKDIqZClcclxuYXNzIDAsIGYgWy0xMDAsNTBdLCctMTAwJ1xyXG5hc3MgMC43NSwgZiBbLTEwMCw1MF0sJzUwJ1xyXG5hc3MgMSwgZiBbLTEwMCw1MF0sJzEwMCdcclxuXHJcbmV4cG9ydCBjbGlja1N0cmluZyA9IChrZXkpID0+XHJcblx0cGFyYW0uU3RyaW5nIGtleVxyXG5cdGlmIGtleSA9PSAnZmxpcCcgdGhlbiBnbG9iYWwuYm9hcmQuZmxpcCgpXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ2xpbmsnIHRoZW4gd2luZG93Lm9wZW4gZGF0YS5saW5rLCAnX2JsYW5rJ1xyXG5cdGVsc2UgaWYga2V5ID09ICd1cCcgICB0aGVuIGZpeFN1cGVyIC0xXHJcblx0ZWxzZSBpZiBrZXkgPT0gJ2Rvd24nIHRoZW4gZml4U3VwZXIgMVxyXG5cdGVsc2UgaWYga2V5ID09ICdwZ3VwJyB0aGVuIHBndXAoKVxyXG5cdGVsc2UgaWYga2V5ID09ICdwZ2RuJyB0aGVuIHBnZG4oKVxyXG5cdGVsc2UgaWYga2V5ID09ICd1bmRvJyB0aGVuIHVuZG8oKVxyXG5cdGVsc2UgaWYga2V5ID09ICdzYXZlJyB0aGVuIGRvd25sb2FkIGdsb2JhbC50cmVlLCBnbG9iYWwuZmlsZW5hbWUgKyAnLmpzb24nXHJcblx0ZWxzZSBjb25zb2xlLmxvZyAndW5rbm93biBrZXkgaW4gY2xpY2tTdHJpbmcnLGtleVxyXG5cclxuZXhwb3J0IGdldE1vdmUgPSAoaW5kZXgpID0+XHJcblx0cGFyYW0uVGVzdCAtMSA8PSBpbmRleCA8PSBnbG9iYWwubW92ZXMubGVuZ3RoXHJcblx0aWYgaW5kZXg9PS0xXHJcblx0XHRwYXJhbS5PYmplY3Qge3Njb3JlOicnLCB1Y2k6JycsIHNhbjonJywgc3VwZXJpb3JzOltdLCBzdXBlcmlvcnNTYW46W119XHJcblx0ZWxzZVxyXG5cdFx0cGFyYW0uT2JqZWN0IGdsb2JhbC5tb3Zlc1tpbmRleF1cclxuIl19
//# sourceURL=c:\github\2023-019-ChessTree\coffee\globals.coffee